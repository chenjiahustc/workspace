<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<package name="book" extends="struts-default">

		<action name="ReaderService" class="ReaderAction">
			<result name="success" type="redirect">/info/readerInfo.jsp</result>
			<result name="input" type="redirect">/login.jsp</result>
			<result name="userUpdate" type="dispatcher">/info/changePwd.jsp</result>
			<result name="updateSuc" type="dispatcher">/info/result.jsp</result>
		</action>

		<action name="adminService" class="adminServiceAction">
			<result name="loginSuc" type="redirect">/info/adminInfo.jsp</result>
			<result name="input" type="redirect">/adminLogin.jsp</result>
		</action>

		<action name="saveReader" class="saveReaderAction">
			<result name="success" type="redirect">
				<param name="actionName">listReader.action</param>
			</result>
			<result name="regSuc" type="dispatcher">/info/readerInfo.jsp</result>
		</action>

	</package>

	<!-- 用户登录后才能访问的action -->
	<package name="authority" extends="struts-default">
		<interceptors>
			<interceptor name="authority"
				class="com.integration.interceptor.AuthorityInterceptor" />
			<interceptor-stack name="mydefault">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="authority" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="mydefault"></default-interceptor-ref>

		<global-results>
			<result name="login">/login.jsp</result>
		</global-results>

		<!-- order -->
		<action name="saveRecorder" class="saveRecorderAction">
			<result name="success" type="dispatcher">/recorder/add.jsp</result>
			<result name="addSuc" type="redirect">recorderService</result>
			<result name="addFail" type="dispatcher">/info/result.jsp</result>
		</action>

		<action name="recorderService" class="recorderServiceAction">
			<result name="success" type="dispatcher">/info/recorderInfo.jsp</result>
			<result name="delSuc" type="dispatcher">/info/result.jsp</result>
		</action>
	</package>

	<!-- 管理员后才能访问的action  -->
	<package name="authorityAdmin" extends="struts-default">
		<interceptors>
			<interceptor name="authorityAdmin" class="com.integration.interceptor.AdminInterceptor" />
			<interceptor-stack name="mydefaultAdmin">
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="authorityAdmin" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="mydefaultAdmin"></default-interceptor-ref>

		<global-results>
			<result name="login">/adminLogin.jsp</result>
		</global-results>

		<!-- user -->
		<action name="listReader" class="listReaderAction">
			<result name="success">/reader/list.jsp</result>
		</action>

		<action name="deleteReader" class="removeReaderAction">
			<result name="success" type="redirect">listReader.action</result>
		</action>

		<action name="updatePReader" class="updatePReaderAction">
			<result name="success">/reader/update.jsp</result>
		</action>

		<action name="updateReader" class="updateReaderAction">
			<result name="success" type="redirect">listReader.action</result>
		</action>

		<!-- admin -->
		<action name="saveAdmin" class="saveAdminAction">
			<result name="success" type="redirect">/index.jsp</result>
		</action>

		<!-- hotel -->
		<action name="saveBook" class="saveBookAction">
			<result name="success" type="redirect">listBook.action</result>
		</action>

		<action name="listBook" class="listBookAction">
			<result name="success">/book/list.jsp</result>
		</action>

		<action name="deleteBook" class="removeBookAction">
			<result name="success" type="redirect">listBook.action</result>
		</action>

		<action name="updatePBook" class="updatePBookAction">
			<result name="success">/book/update.jsp</result>
		</action>

		<action name="updateBook" class="updateBookAction">
			<result name="success" type="redirect">listBook.action</result>
		</action>

		<!-- order -->
		<action name="listRecorder" class="listRecorderAction">
			<result name="success" type="dispatcher">/recorder/list.jsp</result>
		</action>
	</package>

</struts>
